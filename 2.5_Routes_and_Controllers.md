# Routes and Controllers in Ruby on Rails

## 1. Theoretical Explanation

### What are Routes?
Routes in Rails are responsible for mapping incoming HTTP requests to specific controller actions. They define the URL structure of your application and determine which code should be executed when a particular URL is accessed.

### What are Controllers?
Controllers in Rails act as intermediaries between models and views. They handle incoming requests, interact with models to fetch or modify data, and prepare data for the views.

## 2. Rails Routing System

### Basic Route Structure
In Rails, routes are defined in the `config/routes.rb` file. The basic structure of a route is:

```ruby
verb 'path', to: 'controller#action'
```

Example:
```ruby
get '/articles', to: 'articles#index'
```

This route will direct GET requests to `/articles` to the `index` action of the `ArticlesController`.

### RESTful Routes
Rails encourages the use of RESTful routes. You can easily set up a full set of RESTful routes for a resource using the `resources` method:

```ruby
Rails.application.routes.draw do
  resources :articles
end
```

This will create the following routes:
- GET /articles (index)
- GET /articles/new (new)
- POST /articles (create)
- GET /articles/:id (show)
- GET /articles/:id/edit (edit)
- PATCH/PUT /articles/:id (update)
- DELETE /articles/:id (destroy)

## 3. Controllers in Action

### Basic Controller Structure
A basic controller in Rails might look like this:

```ruby
class ArticlesController < ApplicationController
  def index
    @articles = Article.all
  end

  def show
    @article = Article.find(params[:id])
  end

  def new
    @article = Article.new
  end

  def create
    @article = Article.new(article_params)
    if @article.save
      redirect_to @article
    else
      render 'new'
    end
  end

  private

  def article_params
    params.require(:article).permit(:title, :content)
  end
end
```

## 4. Hands-on Exercise

Create a new Rails application for a simple blog. Set up routes and a controller for managing blog posts.

1. Generate a new Rails app:
   ```
   rails new blog
   cd blog
   ```

2. Generate a controller for articles:
   ```
   rails generate controller Articles
   ```

3. Open `config/routes.rb` and add:
   ```ruby
   resources :articles
   ```

4. Implement the `index` and `show` actions in `app/controllers/articles_controller.rb`.

5. Create corresponding views in `app/views/articles/`.

## 5. Real-world Example: Twitter-like Post System

Imagine you're building a Twitter-like application. You might have a `PostsController` that handles creating, displaying, and deleting short messages.

```ruby
# config/routes.rb
Rails.application.routes.draw do
  resources :posts, only: [:index, :create, :destroy]
end

# app/controllers/posts_controller.rb
class PostsController < ApplicationController
  def index
    @posts = Post.order(created_at: :desc).limit(50)
    @new_post = Post.new
  end

  def create
    @post = current_user.posts.new(post_params)
    if @post.save
      redirect_to posts_path, notice: 'Post was successfully created.'
    else
      @posts = Post.order(created_at: :desc).limit(50)
      render :index
    end
  end

  def destroy
    @post = current_user.posts.find(params[:id])
    @post.destroy
    redirect_to posts_path, notice: 'Post was successfully deleted.'
  end

  private

  def post_params
    params.require(:post).permit(:content)
  end
end
```

## 6. Quiz

1. What file in a Rails application is used to define routes?
2. How would you create a route that maps GET requests to "/about" to the `about` action of the `PagesController`?
3. What does the `resources :articles` line in the routes file create?
4. In a controller action, how do you redirect to a different page?
5. What's the purpose of the `params` hash in a controller?

## 7. Additional Resources

- [Rails Routing from the Outside In](https://guides.rubyonrails.org/routing.html)
- [Action Controller Overview](https://guides.rubyonrails.org/action_controller_overview.html)
- [Layouts and Rendering in Rails](https://guides.rubyonrails.org/layouts_and_rendering.html)

Remember to practice regularly by building small projects and experimenting with different routing and controller patterns!
