# MVC Architecture in Ruby on Rails

## Theoretical Explanation

MVC (Model-View-Controller) is an architectural pattern that separates an application into three main logical components:

1. **Model**: Represents the data and business logic of the application.
2. **View**: Handles the presentation and user interface.
3. **Controller**: Acts as an intermediary between Model and View, processing user input and managing application flow.

In Rails, this separation of concerns helps in organizing code, improving maintainability, and promoting reusability.

### How MVC Works in Rails

1. The browser sends a request to the server.
2. The router determines which controller should handle the request.
3. The controller interacts with the model to fetch or manipulate data.
4. The controller passes data to the view.
5. The view renders the final output, which the controller sends back to the browser.

## Hands-on Exercise

Let's create a simple blog application to demonstrate MVC in action.

1. Create a new Rails application:
   ```bash
   rails new blog
   cd blog
   ```

2. Generate a Post model:
   ```bash
   rails generate model Post title:string content:text
   rails db:migrate
   ```

3. Generate a Posts controller:
   ```bash
   rails generate controller Posts index show new create
   ```

4. Update the routes in `config/routes.rb`:
   ```ruby
   Rails.application.routes.draw do
     resources :posts, only: [:index, :show, :new, :create]
     root 'posts#index'
   end
   ```

5. Update the Posts controller in `app/controllers/posts_controller.rb`:
   ```ruby
   class PostsController < ApplicationController
     def index
       @posts = Post.all
     end

     def show
       @post = Post.find(params[:id])
     end

     def new
       @post = Post.new
     end

     def create
       @post = Post.new(post_params)
       if @post.save
         redirect_to @post, notice: 'Post was successfully created.'
       else
         render :new
       end
     end

     private

     def post_params
       params.require(:post).permit(:title, :content)
     end
   end
   ```

6. Create views in `app/views/posts/`:
   
   `index.html.erb`:
   ```erb
   <h1>Blog Posts</h1>
   <% @posts.each do |post| %>
     <h2><%= link_to post.title, post_path(post) %></h2>
   <% end %>
   <%= link_to 'New Post', new_post_path %>
   ```

   `show.html.erb`:
   ```erb
   <h1><%= @post.title %></h1>
   <p><%= @post.content %></p>
   <%= link_to 'Back', posts_path %>
   ```

   `new.html.erb`:
   ```erb
   <h1>New Post</h1>
   <%= form_with(model: @post, local: true) do |form| %>
     <div>
       <%= form.label :title %>
       <%= form.text_field :title %>
     </div>
     <div>
       <%= form.label :content %>
       <%= form.text_area :content %>
     </div>
     <%= form.submit %>
   <% end %>
   <%= link_to 'Back', posts_path %>
   ```

7. Run the server and test your application:
   ```bash
   rails server
   ```

## Real-world Example: Twitter

Twitter is a well-known application that uses the MVC architecture:

- **Models**: User, Tweet, Follow, Like
- **Views**: Home timeline, User profile, Tweet detail
- **Controllers**: TweetsController, UsersController, FollowsController

When a user posts a tweet:
1. The browser sends a POST request to the TweetsController.
2. The TweetsController creates a new Tweet model instance.
3. The Tweet is saved to the database.
4. The controller redirects to the user's timeline view, which displays the new tweet.

## Quiz

1. What does MVC stand for?
2. Which component of MVC handles data and business logic?
3. What is the primary role of the controller in Rails?
4. In the blog example, which file would contain the HTML structure for displaying a single post?
5. How does the router in Rails contribute to the MVC architecture?

## Assessment

Build upon the blog application:
1. Add an "Edit" functionality for posts.
2. Implement a "Delete" feature for posts.
3. Create a Comment model associated with Posts.
4. Update views to display comments for each post.
5. Implement the ability to add new comments to posts.

This exercise will reinforce your understanding of how models, views, and controllers work together in a Rails application.